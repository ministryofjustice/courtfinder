- content_for :title, @court.name
- content_for :titleMetadata, 'property="name"'.html_safe
- content_for :contentMetadata, 'vocab="http://schema.org/" typeof="CourtHouse GovernmentOrganization"'.html_safe
- content_for :last_updated, @court.updated_at.to_s(:standard)
- content_for :nav do
  %li
    = link_to 'Courts', courts_path


-# Admin only
= link_to "Edit this court", edit_admin_court_path(@court) if user_signed_in?


- if @court.display

  
  -# === Print links ===
  %ul
    %li= link_to 'Court information leaflet', '#', :class => 'print-link'
    %li= link_to 'Defence witness leaflet', defence_path(@court)
    %li= link_to 'Prosecution witness leaflet', prosecution_path(@court)



  -# === Alert ===
  - if @court.alert.present?
    %p.alert= @court.alert
  
  
  -# === Addresses ===
  - addresses = @court.addresses
  - visiting = addresses.shift

  - if addresses.present?
    #writing

      %h3 Write to us:
      - addresses.each do |addr|
        %div= format_address addr

  - if addresses.empty?
    %h3 Visit or write to us:
  - else
    %h3 Visit us:

  - if visiting.present?
    %div{:property => "address", :typeof => "PostalAddress"}
      = format_address visiting

  %a(href="#location") Show this on a map

  
  
  -# === Photo ===
  - if @court.image_file_url.present?
    = image_tag(@court.image_file_url.to_s, :id => 'title-image', :property => 'image') if @court.image_file



  -# === Opening times ===
  %h3 Opening hours:
  
  - @court.opening_times.each do |time|
    %p
      = time.opening_type.name
      \: #{time.name}

  

  -# === Contacts ===
  %h3 Contact the court:

  - @court.contacts.each do |contact|
    - if contact.contact_type.present?
      - if contact.telephone?
        %p{:property => "telephone"}
          = contact.contact_type.name
          \: #{contact.telephone}
      - else
        %p= contact.contact_type.name



  -# === Emails ===
  %h3 Other contact details:

  - @court.emails.each do |email|
    %p
      - if email.description.present?
        = "#{email.description}"
      = mail_to email.address

  
  
  -# === Areas of law ===
  %h3 Areas of law covered:

  - areas = []
  - @court.areas_of_law.each_with_index do |area, i|
    - areas.push(i > 0 ? area.name.downcase : area.name)
  
  %p= areas.join ', '



  -# === Facilities ===
  %h3 Court facilities available:

  - @court.court_facilities.each do |court_facility|
    %dl
      %dt= court_facility.facility.name if court_facility.facility
      %dd= court_facility.description.html_safe

  

  -# === Map ===
  %h3#location Location of the court:

  %form{:action => "http://maps.google.com/maps", :method => "get", :rel => "ext"}
    %label{:for => "saddr"} Enter your location
    %input{:name => "saddr", :type => "text", :value => params[:from]}
    %input{:name => "daddr", :type => "hidden", :value => "#{@court.latitude},#{@court.longitude}"}
    %input{:type => "submit", :value => "Get directions"}

  - if params[:from].present?
    = gmaps({"direction" => { "data" => { "from" => params[:from], "to" => visiting.full }, "options" => { "display_panel" => true, "panel_id" => "instructions"} } })
    %h3 Route planner
    #instructions
  - else
    = gmaps({"markers" => {"data" => @court.to_gmaps4rails}, "map_options" => {"auto_zoom" => false, "zoom" => 15} })
  / <p>Area id <haml:loud> @court.area_id </haml:loud></p>
  / <p>CCI identifier <haml:loud> @court.cci_identifier </haml:loud></p>
  / <p>court code <haml:loud> @court.cci_code </haml:loud> </p>



  -# === Court info ===
  - unless @court.info.nil?
    %h3 Further information:
    %div{:property => "description"}= @court.info.html_safe


- else

  -# === Court closed ===
  %p This court is no longer in service.
