/*! tagify - v0.0.2 - http://decipherinc.github.io/tagify
 * Copyright (c) 2014 Decipher, Inc.; Licensed MIT */
!function(a){"use strict";function b(b,c){var d,e,f={delimiter:",",addClassToTag:"",addNewDelimiter:[13,44,188,32],placeholder:"",inputValidation:!1,disallowInvalid:!1,buttonText:"go",showButton:!1,removeDupes:!0,showPreviewIcon:!1,maxTagLimit:null,maxTagLimitMsg:"Max tag limit reached.",previewTitle:"Click to view the tag values as a string. Useful for copy / paste into other tagify inputs.",style:{},addCb:a.noop,removeCb:a.noop,invalidCb:a.noop};this.opts=a.extend(f,c||{}),this.opts.className="tagify-tag",this.opts.addClassToTag="string"!==a.type(this.opts.addClassToTag)?[]:this.opts.addClassToTag.split(" "),isNaN(this.opts.maxTagLimit)&&(this.opts.maxTagLimit=null),this.opts.inputValidation&&(d=a.type(this.opts.inputValidation),e="string"===d?new RegExp(this.opts.inputValidation):"regexp"===d?this.opts.inputValidation:null,this.inputValidation=e),a.isFunction(this.opts.addCb)||(this.opts.addCb=a.noop),a.isFunction(this.opts.removeCb)||(this.opts.removeCb=a.noop),this.$originalInput=b,this._tagValues=[],this._tagList=this.splitter(this.$originalInput.val(),!0),this.$tagify=this.createTagifyView(),this.$tagifyInput=this.$tagify.find(".tagify-input"),this.updateOriginalInput(),this.setTagifyInputState(),this.$originalInput.hide(),this.$tagify.insertAfter(this.$originalInput),this.addEvents()}function c(a){for(var b="input[type=text] textarea".split(" "),c=!0,d=0,e=b.length;e>d;d++){if(a.is(b[d])){c=!0;break}c=!1}return c}function d(d){if("string"===a.type(d))switch(d=d.toLowerCase()){case"reset":return this.each(function(){var b=a(this).data("tagify-instance");b&&b.reset()});default:throw'Specified method "'+d+'" is not provided by the tagify api.'}return this.each(function(){var e=a(this);c(e)&&e.data("tagify-instance",new b(e,d))})}b.prototype.setTagifyInputState=function(){if(this.opts.maxTagLimit){var a=this._tagList.length;a>=this.opts.maxTagLimit?this.$tagifyInput.attr("disabled",!0).attr("placeholder",this.opts.maxTagLimitMsg):this.$tagifyInput.attr("disabled",!1).attr("placeholder",this.opts.placeholder)}},b.prototype.splitter=function(b,c){if(!b)return[];var d=this,e=b.split(this.opts.delimiter),f=d.opts.inputValidation;return a.map(e,function(b){var e;return b=a.trim(b),!b||d.opts.removeDupes&&-1!==a.inArray(b,d._tagValues)?void 0:f&&(e=!f.test(b),e&&d.opts.disallowInvalid&&!c)?void d.opts.invalidCb(b,d.$tagifyInput,a.proxy(d.forceAdd,d)):(d._tagValues.push(b),{tag:b,invalid:e})})},b.prototype.forceAdd=function(a){var b=this.opts.disallowInvalid;this.$tagifyInput.val(a),this.opts.disallowInvalid=!1,this.$tagifyInput.trigger("forceAdd"),this.opts.disallowInvalid=b},b.prototype.updateOriginalInput=function(){this.$originalInput.val(a.map(this._tagList,function(a){return a.tag}).join(this.opts.delimiter))},b.prototype.tagifyInput=function(){var b,c,d,e=a('<div class="tagify-input-container" />'),f=a('<input type="text" class="tagify-input" />');return this.opts.placeholder&&f.attr("placeholder",this.opts.placeholder),this.opts.showPreviewIcon&&(d=this._tagList.length?"tagify-preview":"tagify-preview-disabled",c=a('<i class="tagify-preview-icon"></i>').addClass(d).attr("title",this.opts.previewTitle),e.append(c)),e.append(f),this.opts.showButton&&(b=a("<button></button>").text(this.opts.buttonText),e.append(b)),a.isEmptyObject(this.opts.style)||f.css(this.opts.style),e},b.prototype.generateTag=function(b,c){var d=a("<div />");return d.addClass(this.opts.className),this.opts.addClassToTag.length&&d.addClass(this.opts.addClassToTag.join(" ")),c&&d.addClass("invalid"),d.text(b),d.append(a('<i class="tagify-remove"></i>')),d},b.prototype.createTagifyView=function(){var b=this,c=a("<div />").addClass("tagify");return a.each(this._tagList,function(a,d){var e=b.generateTag(d.tag,d.invalid);c.append(e)}),c.append(b.tagifyInput()),c},b.prototype.addTagToView=function(a,b){var c=this.generateTag(a,b);this.$tagify.find(".tagify-input-container").before(c)},b.prototype.resetTagifyInput=function(){this.$tagify.find(".tagify-input").val("")},b.prototype.reset=function(){this.resetTagifyInput(),this._tagList=[],this._tagValues=[],this.$tagify.find("."+this.opts.className).remove(),this.updateOriginalInput()},b.prototype.setPreviewIcon=function(){var a="tagify-preview-disabled tagify-preview",b=this.$tagify.find(".tagify-preview-icon");b.removeClass(a),b.addClass(this._tagList.length?"tagify-preview":"tagify-preview-disabled")},b.prototype.addEvents=function(){function b(b){this.resetTagifyInput();var c=this,d=this.splitter(b);return d.length?(a.each(d,function(a,b){c.addTagToView(b.tag,b.invalid)}),a.each(d,function(a,b){c._tagList.push(b)}),c.updateOriginalInput(),c.setPreviewIcon(),c.setTagifyInputState(),d):void 0}function c(a,b){for(var c,d=0,e=b.length;e>d;d++){var f=b[d];if(f.tag===a){c=f;break}}return c}function d(b){var d=c(b,this._tagList),e=a.inArray(d,this._tagList),f=a.inArray(d,this._tagValues);-1!==e&&(this._tagList.splice(e,1),this._tagValues.splice(f,1),this.updateOriginalInput(),this.setPreviewIcon()),this.setTagifyInputState()}return function(){var c=this,e=this.opts.addCb,f=this.opts.removeCb,g=this.$tagify.find(".tagify-input");this.$tagify.on("click",".tagify-preview",function(){g.val(c.$originalInput.val()),g.focus(),g[0].select()}),this.$tagify.on("click",".tagify-remove",function(b){var e=a(b.target).closest(".tagify-tag"),g=e.text();d.call(c,g),f.call(c.$originalInput[0],g),e.remove()}),this.$tagify.on("blur forceAdd",".tagify-input",function(a){a.preventDefault();var d=c.$tagifyInput,f=d.val(),g=b.call(c,f);g&&e.call(c.$originalInput[0],g)}),this.$tagify.on("keypress",".tagify-input",function(d){var f,g=d.which;if(-1!==a.inArray(g,c.opts.addNewDelimiter)){d.preventDefault(),f=c.$tagifyInput;var h=f.val(),i=b.call(c,h);i&&e.call(c.$originalInput[0],i)}})}}(),a.fn.tagify=d}(jQuery);
//# sourceMappingURL=jquery.tagify.min.js.map